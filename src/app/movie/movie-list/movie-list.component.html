<h1>Lista de Películas</h1>
<div>
  <div>
    @if(selected){
    <app-movie-detail [movie]="selectedMovie"></app-movie-detail>
    }
    <table>
      <tr>
        <th scope="col">Título</th>
        <th scope="col">Poster</th>
        <th scope="col">Director</th>
        <th scope="col">Año</th>
        <th scope="col">Calificación</th>
      </tr>
      @for(movie of movies; track movie.id) {

      <tr (click)="onSelect(movie)">
        <td>
          <b>{{ movie.title }}</b>
        </td>
        <td>
          <img class="poster-img" [src]="movie.posterImageUrl" alt="{{ movie.title }} poster" />
        </td>
        <td>{{ movie.director }}</td>
        <td>{{ movie.releaseYear }}</td>
        <td>{{ movie.rating }}</td>
      </tr>
      }
    </table>
  </div>
</div>

<h2>Películas</h2>

<div *ngIf="loading" class="alert alert-info">Cargando…</div>
<div *ngIf="!loading && error" class="alert alert-danger">{{ error }}</div>
<div *ngIf="!loading && !error && movies.length === 0" class="alert alert-secondary">No hay películas.</div>

<ul *ngIf="!loading && !error && movies.length">
  <li *ngFor="let m of movies" class="movie-item">
    <a [routerLink]="['/movies', m.id]">{{ m.title }}</a>

    <span class="muted"> · {{ m.director }} · {{ m.year }}</span>
  </li>
</ul>

